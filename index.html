// Hauptkomponenten: Lobby, Game, Info, Bot, Kartentisch import React, { useState } from "react"; import { Button } from "@/components/ui/button"; import { Card, CardContent } from "@/components/ui/card"; import { motion, AnimatePresence } from "framer-motion";

const generateLobbyCode = () => Math.random().toString(36).substring(2, 8).toUpperCase();

const sampleCards = ["♠A", "♦10", "♣7", "♥K", "♠3"];

export default function PokerLobbyApp() { const [lobbyCode, setLobbyCode] = useState(""); const [joinedLobby, setJoinedLobby] = useState(false); const [showInfo, setShowInfo] = useState(false); const [selectedCard, setSelectedCard] = useState(null); const [trainingMode, setTrainingMode] = useState(false); const [playedCards, setPlayedCards] = useState([]); const [showTable, setShowTable] = useState(false); const [isBotTurn, setIsBotTurn] = useState(false); const [playerPoints, setPlayerPoints] = useState(0); const [botPoints, setBotPoints] = useState(0); const [currentBotCard, setCurrentBotCard] = useState(null);

const createLobby = () => { const code = generateLobbyCode(); setLobbyCode(code); setJoinedLobby(true); setTrainingMode(false); };

const joinLobby = (code) => { if (code.length === 6) { setLobbyCode(code.toUpperCase()); setJoinedLobby(true); setTrainingMode(false); } };

const startTraining = () => { setLobbyCode("TRAINING"); setJoinedLobby(true); setTrainingMode(true); };

const botMove = () => { const botCard = sampleCards[Math.floor(Math.random() * sampleCards.length)]; return botCard; };

const cardValue = (card) => { const value = card.slice(1); const cardMap = { J: 11, Q: 12, K: 13, A: 14 }; return cardMap[value] || parseInt(value); };

const playCard = (cardIndex) => { if (isBotTurn) return;

setSelectedCard(cardIndex);
const playerCard = sampleCards[cardIndex];
setIsBotTurn(true);

setTimeout(() => {
  const botCard = botMove();
  setCurrentBotCard(botCard);
  setPlayedCards((prev) => [...prev, { player: playerCard, bot: botCard }]);

  const playerVal = cardValue(playerCard);
  const botVal = cardValue(botCard);

  if (playerVal > botVal) setPlayerPoints((p) => p + 1);
  else if (botVal > playerVal) setBotPoints((b) => b + 1);

  setIsBotTurn(false);
}, 1500);

};

return ( <div className="min-h-screen bg-white p-4 flex flex-col items-center justify-center space-y-4"> {!joinedLobby ? ( <div className="space-y-2"> <Button onClick={createLobby}>Lobby erstellen</Button> <input type="text" placeholder="Lobby-Code eingeben" maxLength={6} className="border p-2 rounded" onKeyDown={(e) => e.key === "Enter" && joinLobby(e.target.value)} /> <Button variant="outline" onClick={startTraining}> Gegen Bot trainieren </Button> </div> ) : ( <div className="text-center space-y-4"> <h2 className="text-xl font-bold"> {trainingMode ? "Trainingsmodus gegen Bot" : Lobby-Code: ${lobbyCode}} </h2>

<div className="flex gap-2 items-center justify-center flex-wrap">
        {sampleCards.map((card, index) => (
          <AnimatePresence key={index}>
            {selectedCard !== index && (
              <motion.div
                initial={{ opacity: 0, scale: 0.9 }}
                animate={{ opacity: 1, scale: 1 }}
                exit={{ opacity: 0, scale: 0.5 }}
                className={`cursor-pointer transition-transform duration-200 ${
                  isBotTurn ? "opacity-50 pointer-events-none" : ""
                }`}
                whileTap={{ scale: 1.2 }}
                onClick={() => playCard(index)}
              >
                <Card className="w-16 h-24 flex items-center justify-center text-2xl">
                  <CardContent>{card}</CardContent>
                </Card>
              </motion.div>
            )}
          </AnimatePresence>
        ))}
        <Button variant="outline" onClick={() => setShowInfo(true)}>
          ?
        </Button>
        <Button variant="outline" onClick={() => setShowTable(true)}>
          Tisch anzeigen
        </Button>
      </div>

      {selectedCard !== null && currentBotCard && (
        <div className="text-lg mt-2">
          Du hast {sampleCards[selectedCard]} gespielt. Der Bot spielt: {currentBotCard}
        </div>
      )}

      <div className="text-md mt-2">
        Punkte – Du: {playerPoints} | Bot: {botPoints}
      </div>
    </div>
  )}

  {showTable && (
    <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
      <div className="bg-white p-4 rounded shadow-lg max-w-md w-full">
        <h2 className="text-lg font-bold mb-2">Gespielte Karten</h2>
        {playedCards.length === 0 ? (
          <p>Es wurden noch keine Karten gespielt.</p>
        ) : (
          <ul className="space-y-1">
            {playedCards.map((round, idx) => (
              <li key={idx} className="text-left">
                Runde {idx + 1}: Du – {round.player} | Bot – {round.bot}
              </li>
            ))}
          </ul>
        )}
        <Button className="mt-4" onClick={() => setShowTable(false)}>
          Schließen
        </Button>
      </div>
    </div>
  )}

  {showInfo && (
    <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
      <div className="bg-white p-4 rounded shadow-lg max-w-md w-full">
        <h2 className="text-lg font-bold mb-2">Poker Regeln</h2>
        <p className="mb-2">
          Ziel ist es, mit fünf Karten eine möglichst starke Kombination zu bilden. Hier sind die Hände von schwach nach stark:
        </p>
        <ul className="text-left list-disc pl-5 space-y-1 text-sm">
          <li><strong>High Card:</strong> Keine Kombination – höchste Karte zählt</li>
          <li><strong>Ein Paar:</strong> Zwei gleiche Karten</li>
          <li><strong>Zwei Paare:</strong> Zwei verschiedene Paare</li>
          <li><strong>Drilling:</strong> Drei gleiche Karten</li>
          <li><strong>Straße:</strong> Fünf aufeinanderfolgende Karten</li>
          <li><strong>Flush:</strong> Fünf Karten derselben Farbe</li>
          <li><strong>Full House:</strong> Drilling + ein Paar</li>
          <li><strong>Vierling:</strong> Vier gleiche Karten</li>
          <li><strong>Straight Flush:</strong> Straße + Flush gleichzeitig</li>
          <li><strong>Royal Flush:</strong> 10 bis Ass in einer Farbe</li>
        </ul>
        <Button className="mt-4" onClick={() => setShowInfo(false)}>
          Schließen
        </Button>
      </div>
    </div>
  )}
</div>

); }

